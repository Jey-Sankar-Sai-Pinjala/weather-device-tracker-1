{"ast":null,"code":"import{MapContainer,TileLayer,Polyline,Marker,Popup}from'react-leaflet';import'leaflet/dist/leaflet.css';import{useState,useEffect}from'react';import axios from'axios';import L from'leaflet';import markerIcon2x from'leaflet/dist/images/marker-icon-2x.png';import markerIcon from'leaflet/dist/images/marker-icon.png';import markerShadow from'leaflet/dist/images/marker-shadow.png';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";delete L.Icon.Default.prototype._getIconUrl;L.Icon.Default.mergeOptions({iconRetinaUrl:markerIcon2x,iconUrl:markerIcon,shadowUrl:markerShadow});export default function App(){const[positions,setPositions]=useState([]);const[selected,setSelected]=useState(null);const[uniqueDays,setUniqueDays]=useState([]);const[currentDay,setCurrentDay]=useState(null);useEffect(()=>{axios.get('http://localhost:5000/api/positions').then(response=>{const data=response.data;setPositions(data);const days=[...new Set(data.map(p=>p.fixTime.split(' ')[0]))];setUniqueDays(days);setCurrentDay(days[0]);// Set to first day\n}).catch(error=>console.error('Error fetching data:',error));},[]);// Animate through days (optional)\n/*\n  useEffect(() => {\n    let interval;\n    if (uniqueDays.length > 0) {\n      interval = setInterval(() => {\n        setCurrentDay(prev => {\n          const idx = uniqueDays.indexOf(prev);\n          return uniqueDays[(idx + 1) % uniqueDays.length];\n        });\n      }, 2000); // every 2 seconds\n    }\n    return () => clearInterval(interval);\n  }, [uniqueDays]);\n  */const filteredPositions=positions.filter(p=>p.fixTime.startsWith(currentDay));const polyline=filteredPositions.map(p=>[p.lat,p.lon]);return/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'2rem',padding:'2rem'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{flex:1},children:[/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'1rem'},children:[/*#__PURE__*/_jsx(\"label\",{children:\"Select Day: \"}),/*#__PURE__*/_jsx(\"select\",{value:currentDay,onChange:e=>setCurrentDay(e.target.value),children:uniqueDays.map((day,index)=>/*#__PURE__*/_jsx(\"option\",{value:day,children:day},index))})]}),/*#__PURE__*/_jsxs(MapContainer,{center:[8.74,69.15],zoom:5,scrollWheelZoom:true,style:{height:'600px',borderRadius:'1rem'},children:[/*#__PURE__*/_jsx(TileLayer,{url:\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\",attribution:\"\\xA9 OpenStreetMap contributors\"}),/*#__PURE__*/_jsx(Polyline,{positions:polyline,color:\"red\"}),filteredPositions.map((pos,index)=>/*#__PURE__*/_jsx(Marker,{position:[pos.lat,pos.lon],eventHandlers:{click:()=>setSelected(pos)},children:/*#__PURE__*/_jsx(Popup,{children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Fix Time:\"}),\" \",pos.fixTime,/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"strong\",{children:\"Obs Time:\"}),\" \",pos.obsTime,/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0394Time (min):\"}),\" \",Math.round((new Date(pos.fixTime)-new Date(pos.obsTime))/60000)]})})},index))]})]}),/*#__PURE__*/_jsx(\"div\",{style:{flex:1},children:selected?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Selected Point\"}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Latitude:\"}),\" \",selected.lat]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Longitude:\"}),\" \",selected.lon]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Position Fix Time:\"}),\" \",selected.fixTime]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Observation Time:\"}),\" \",selected.obsTime]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Time Difference:\"}),\" \",Math.round((new Date(selected.fixTime)-new Date(selected.obsTime))/60000),\" minutes\"]})]}):/*#__PURE__*/_jsx(\"p\",{children:\"Select a marker on the map to view details.\"})})]});}","map":{"version":3,"names":["MapContainer","TileLayer","Polyline","Marker","Popup","useState","useEffect","axios","L","markerIcon2x","markerIcon","markerShadow","jsx","_jsx","jsxs","_jsxs","Icon","Default","prototype","_getIconUrl","mergeOptions","iconRetinaUrl","iconUrl","shadowUrl","App","positions","setPositions","selected","setSelected","uniqueDays","setUniqueDays","currentDay","setCurrentDay","get","then","response","data","days","Set","map","p","fixTime","split","catch","error","console","filteredPositions","filter","startsWith","polyline","lat","lon","style","display","gap","padding","children","flex","marginBottom","value","onChange","e","target","day","index","center","zoom","scrollWheelZoom","height","borderRadius","url","attribution","color","pos","position","eventHandlers","click","obsTime","Math","round","Date"],"sources":["C:/Users/user/Downloads/weather-device-tracker/frontend/src/App.jsx"],"sourcesContent":["import { MapContainer, TileLayer, Polyline, Marker, Popup } from 'react-leaflet';\nimport 'leaflet/dist/leaflet.css';\nimport { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport L from 'leaflet';\nimport markerIcon2x from 'leaflet/dist/images/marker-icon-2x.png';\nimport markerIcon from 'leaflet/dist/images/marker-icon.png';\nimport markerShadow from 'leaflet/dist/images/marker-shadow.png';\n\ndelete L.Icon.Default.prototype._getIconUrl;\n\nL.Icon.Default.mergeOptions({\n  iconRetinaUrl: markerIcon2x,\n  iconUrl: markerIcon,\n  shadowUrl: markerShadow,\n});\n\nexport default function App() {\n  const [positions, setPositions] = useState([]);\n  const [selected, setSelected] = useState(null);\n  const [uniqueDays, setUniqueDays] = useState([]);\n  const [currentDay, setCurrentDay] = useState(null);\n\n  useEffect(() => {\n    axios.get('http://localhost:5000/api/positions')\n      .then(response => {\n        const data = response.data;\n        setPositions(data);\n\n        const days = [...new Set(data.map(p => p.fixTime.split(' ')[0]))];\n        setUniqueDays(days);\n        setCurrentDay(days[0]); // Set to first day\n      })\n      .catch(error => console.error('Error fetching data:', error));\n  }, []);\n\n  // Animate through days (optional)\n  /*\n  useEffect(() => {\n    let interval;\n    if (uniqueDays.length > 0) {\n      interval = setInterval(() => {\n        setCurrentDay(prev => {\n          const idx = uniqueDays.indexOf(prev);\n          return uniqueDays[(idx + 1) % uniqueDays.length];\n        });\n      }, 2000); // every 2 seconds\n    }\n    return () => clearInterval(interval);\n  }, [uniqueDays]);\n  */\n\n  const filteredPositions = positions.filter(p => p.fixTime.startsWith(currentDay));\n  const polyline = filteredPositions.map(p => [p.lat, p.lon]);\n\n  return (\n    <div style={{ display: 'flex', gap: '2rem', padding: '2rem' }}>\n      <div style={{ flex: 1 }}>\n        <div style={{ marginBottom: '1rem' }}>\n          <label>Select Day: </label>\n          <select value={currentDay} onChange={(e) => setCurrentDay(e.target.value)}>\n            {uniqueDays.map((day, index) => (\n              <option key={index} value={day}>{day}</option>\n            ))}\n          </select>\n        </div>\n\n        <MapContainer center={[8.74, 69.15]} zoom={5} scrollWheelZoom={true} style={{ height: '600px', borderRadius: '1rem' }}>\n          <TileLayer\n            url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n            attribution=\"&copy; OpenStreetMap contributors\"\n          />\n          <Polyline positions={polyline} color=\"red\" />\n          {filteredPositions.map((pos, index) => (\n            <Marker key={index} position={[pos.lat, pos.lon]} eventHandlers={{ click: () => setSelected(pos) }}>\n              <Popup>\n                <div>\n                  <strong>Fix Time:</strong> {pos.fixTime}<br />\n                  <strong>Obs Time:</strong> {pos.obsTime}<br />\n                  <strong>Î”Time (min):</strong> {Math.round((new Date(pos.fixTime) - new Date(pos.obsTime)) / 60000)}\n                </div>\n              </Popup>\n            </Marker>\n          ))}\n        </MapContainer>\n      </div>\n\n      <div style={{ flex: 1 }}>\n        {selected ? (\n          <div>\n            <h2>Selected Point</h2>\n            <p><strong>Latitude:</strong> {selected.lat}</p>\n            <p><strong>Longitude:</strong> {selected.lon}</p>\n            <p><strong>Position Fix Time:</strong> {selected.fixTime}</p>\n            <p><strong>Observation Time:</strong> {selected.obsTime}</p>\n            <p><strong>Time Difference:</strong> {Math.round((new Date(selected.fixTime) - new Date(selected.obsTime)) / 60000)} minutes</p>\n          </div>\n        ) : (\n          <p>Select a marker on the map to view details.</p>\n        )}\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}